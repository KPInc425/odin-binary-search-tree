(()=>{const o=o=>({root:o,leftNode:null,rightNode:null}),l=e=>{let t=e.length,r=Math.floor(t/2);if(r<0&&(r=0),0==t)return null;let n=o(e[r]),u=e.slice(0,r);n.leftNode=l(u);let g=e.slice(r+1,t);return n.rightNode=l(g),n},e=(l,t)=>{let r=l;return null===l?o(t):(t<r.root?r.leftNode=e(r.leftNode,t):r.rightNode=e(r.rightNode,t),l)},t=(o,l)=>{let e=[];if(null===o)return null;const t=(o,l)=>{o&&(e[l]?e[l].push(o.root):e[l]=[o.root],t(o.leftNode,l+1),t(o.rightNode,l+1))};if(t(o,0),!l)return e;l()},r=(o,l)=>{let e=[];if(null===o)return null;const t=o=>{if(!o)return null;console.log(o.root),e.push(o.root),l&&l(o.root),t(o.leftNode),t(o.rightNode)};return t(o),e},n=(o,l)=>{let e=[];if(null===o)return null;const t=o=>{if(!o)return null;t(o.leftNode),console.log(o.root),e.push(o.root),l&&l(o.root),t(o.rightNode)};return t(o),e},u=(o,l)=>{let e=[];if(null===o)return null;const t=o=>{if(!o)return null;t(o.leftNode),t(o.rightNode),console.log(o.root),e.push(o.root),l&&l(o.root)};return t(o),e},g=o=>{if(!o)return null;let l=f(o.leftNode)-f(o.rightNode);return l<0&&(l*=-1),!(l>1||(g(o.leftNode),g(o.rightNode),0))},s=o=>{if(!o)return null;let e=n(o);return l(e)},f=o=>{if(!o)return null;const l=(o,e)=>{if(!o)return e;e++;let t=l(o.leftNode,e),r=l(o.rightNode,e);return t>r?t:r};return l(o,0)},c=(o,l="",e=!0)=>{null!==o.rightNode&&c(o.rightNode,`${l}${e?"│   ":"    "}`,!1),console.log(`${l}${e?"└── ":"┌── "}${o.root}`),null!==o.leftNode&&c(o.leftNode,`${l}${e?"    ":"│   "}`,!0)};(()=>{let o=((o,l)=>{l=l||5e3;let e=[];for(let t=0;t<o;t++){let o=Math.floor(Math.random()*l);e.push(o)}return e})(13);console.log(o);let f=l(o);c(f);let i=g(f);console.log(i),i?(console.log(t(f)),console.log(r(f)),console.log(u(f)),console.log(n(f))):(s(f),console.log(t(f)),console.log(r(f)),console.log(u(f)),console.log(n(f)));for(let o=1;o<10;o++)e(f,123*o);c(f),i=g(f),console.log(i),i||(f=s(f)),i=g(f),console.log(i),c(f),console.log(i),console.log(t(f)),console.log(r(f)),console.log(u(f)),console.log(n(f))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WixJQUFJQyxFQUFXcEIsRUFBV21CLEdBRTFCekIsUUFBUUMsSUFBSXlCLEdBRVJBLEdBQ0YxQixRQUFRQyxJQUFJVCxFQUFXaUMsSUFDdkJ6QixRQUFRQyxJQUFJSCxFQUFZMkIsSUFDeEJ6QixRQUFRQyxJQUFJRyxFQUFhcUIsSUFDekJ6QixRQUFRQyxJQUFJQyxFQUFXdUIsTUFFdkJoQixFQUFVZ0IsR0FDVnpCLFFBQVFDLElBQUlULEVBQVdpQyxJQUN2QnpCLFFBQVFDLElBQUlILEVBQVkyQixJQUN4QnpCLFFBQVFDLElBQUlHLEVBQWFxQixJQUN6QnpCLFFBQVFDLElBQUlDLEVBQVd1QixLQUd6QixJQUFLLElBQUlKLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUN0QmpDLEVBQVdxQyxFQUFVLElBQUpKLEdBR25CTixFQUFZVSxHQUVaQyxFQUFXcEIsRUFBV21CLEdBRXRCekIsUUFBUUMsSUFBSXlCLEdBRVBBLElBQ0hELEVBQU1oQixFQUFVZ0IsSUFHbEJDLEVBQVdwQixFQUFXbUIsR0FFdEJ6QixRQUFRQyxJQUFJeUIsR0FDWlgsRUFBWVUsR0FFWnpCLFFBQVFDLElBQUl5QixHQUNaMUIsUUFBUUMsSUFBSVQsRUFBV2lDLElBQ3ZCekIsUUFBUUMsSUFBSUgsRUFBWTJCLElBQ3hCekIsUUFBUUMsSUFBSUcsRUFBYXFCLElBQ3pCekIsUUFBUUMsSUFBSUMsRUFBV3VCLEdBQUssRUFrQjlCRSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi1pbWFnZS1jYXJvdXNlbC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBub2RlID0gKGRhdGEpID0+IHtcbiAgcmV0dXJuIHtcbiAgICByb290OiBkYXRhLFxuICAgIGxlZnROb2RlOiBudWxsLFxuICAgIHJpZ2h0Tm9kZTogbnVsbCxcbiAgfVxufSBcblxuY29uc3QgdHJlZSA9IChhcnJheSkgPT4ge1xuICBsZXQgc29ydGVkQXJyYXkgPSBpbml0aWFsaXplU29ydGVkQXJyYXkoYXJyYXkpO1xuICAvLyBjb25zb2xlLmxvZyhzb3J0ZWRBcnJheSk7XG4gIGxldCByb290ID0gYnVpbGRUcmVlKHNvcnRlZEFycmF5KTtcblxuICByZXR1cm4gcm9vdDtcbn1cblxuY29uc3QgYnVpbGRUcmVlID0gKGFycmF5KSA9PiB7XG4gIC8vIGNvbnNvbGUubG9nKGFycmF5KTtcbiAgLy8gbGV0IGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgbGV0IHN0YXJ0ID0gMDtcbiAgbGV0IGVuZCA9IGFycmF5Lmxlbmd0aDtcbiAgbGV0IG1pZCA9IE1hdGguZmxvb3IoZW5kIC8gMik7XG4gIC8vIE1ha2Ugc3VyZSBtaWQgc2VsZWN0aW9uIG5ldmVyIGdvZXMgbmVnYXRpdmVcbiAgaWYgKG1pZCA8IDApIHtcbiAgICBtaWQgPSAwO1xuICB9XG5cbiAgLy8gY29uc29sZS5sb2coXCJMZW5ndGg6IFwiICsgbGVuZ3RoKTtcbiAgLy8gY29uc29sZS5sb2coXCJTdGFydDogXCIgKyBzdGFydCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiTWlkOiBcIiArIG1pZCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiRW5kOiBcIiArIGVuZCk7XG5cbiAgaWYgKHN0YXJ0ID09IGVuZCkge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiTnVsbFwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyBjb25zb2xlLmxvZyhhcnJheVttaWRdKTtcbiAgbGV0IHJvb3QgPSBub2RlKGFycmF5W21pZF0pO1xuICAvLyBjb25zb2xlLmxvZyhyb290KTtcblxuICBsZXQgdG1wTGVmdEFycmF5ID0gYXJyYXkuc2xpY2Uoc3RhcnQsIG1pZCk7XG4gIC8vIGNvbnNvbGUubG9nKHRtcExlZnRBcnJheSk7XG5cbiAgcm9vdC5sZWZ0Tm9kZSA9IGJ1aWxkVHJlZSh0bXBMZWZ0QXJyYXkpO1xuXG4gIGxldCB0bXBSaWdodEFycmF5ID0gYXJyYXkuc2xpY2UobWlkICsgMSwgZW5kKTtcbiAgLy8gY29uc29sZS5sb2codG1wUmlnaHRBcnJheSk7XG5cbiAgcm9vdC5yaWdodE5vZGUgPSBidWlsZFRyZWUodG1wUmlnaHRBcnJheSk7XG5cbiAgcmV0dXJuIHJvb3Q7XG59XG5cbmNvbnN0IGluc2VydE5vZGUgPSAodHJlZSwgdmFsdWUpID0+IHtcbiAgLy8gVEVTVElORyBcbiAgLy8gY29uc29sZS5sb2coXCJUcmVlXCIpO1xuICAvLyBjb25zb2xlLmxvZyh0cmVlKTtcbiAgLy8gY29uc29sZS5sb2coXCJWYWx1ZTogXCIgKyB2YWx1ZSk7XG4gIC8vIFRFU1RJTkdcblxuICAvLyByZWZlcmVuY2UgY3VycmVudCBub2RlIGZvciBwb3NpdGlvblxuICBsZXQgY3VycmVudE5vZGUgPSB0cmVlO1xuICAvLyBjb25zb2xlLmxvZyhjdXJyZW50Tm9kZSk7XG5cbiAgLy8gQmFzZSBDYXNlIGlmIGVuZCBvZiBCU1QgaXMgcmVhY2hcbiAgaWYgKHRyZWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJlZSA9IG5vZGUodmFsdWUpO1xuICB9XG5cbiAgLy8gVHJhdmVyc2UgdG8gbGVmdCBub2RlIGlmIHZhbHVlIGlzIGxvd2VyXG4gIGlmICh2YWx1ZSA8IGN1cnJlbnROb2RlLnJvb3QpIHtcbiAgICAvLyBJbnNlcnQgaW50byBsZWZ0Tm9kZSB3aXRoIG51bGxcbiAgICBjdXJyZW50Tm9kZS5sZWZ0Tm9kZSA9IGluc2VydE5vZGUoY3VycmVudE5vZGUubGVmdE5vZGUsIHZhbHVlKTtcbiAgLy8gVHJhdmVyc2UgdG8gcmlnaHQgbm9kZSBvdGhlcndpc2VcbiAgfSBlbHNlIHtcbiAgICAvLyBJbnNlcnQgaW50byByaWdodE5vZGUgd2l0aCBudWxsXG4gICAgY3VycmVudE5vZGUucmlnaHROb2RlID0gaW5zZXJ0Tm9kZShjdXJyZW50Tm9kZS5yaWdodE5vZGUsIHZhbHVlKTtcbiAgfSBcbiAgXG4gIC8vIHJldHVybiB0aGUgdHJlZVxuICByZXR1cm4gdHJlZTtcbn1cblxuY29uc3QgZGVsZXRlTm9kZSA9ICh0cmVlLCB2YWx1ZSkgPT4ge1xuICBsZXQgY3VycmVudE5vZGUgPSB0cmVlO1xuICAvLyBpZiBWYWx1ZSBkb2Vzbid0IGV4aXN0IHJldHVybiBlcnJvclxuICBpZiAoY3VycmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIlRoZXJlIGlzIG5vIG5vZGUgd2l0aCB0aGF0IHZhbHVlIVwiKTtcbiAgLy8gaWYgTWF0Y2ggZm91bmQgPiBjaGVjayBjaGlsZHJlbiAgXG4gIH0gZWxzZSBpZiAoY3VycmVudE5vZGUucm9vdCA9PT0gdmFsdWUpIHtcbiAgICAvLyBpZiBubyBjaGlsZHJlbiByZXR1cm4gbnVsbFxuICAgIGlmIChjdXJyZW50Tm9kZS5sZWZ0Tm9kZSA9PT0gbnVsbCAmJiBjdXJyZW50Tm9kZS5yaWdodE5vZGUgPT09IG51bGwpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiTm8gQ2hpbGRyZW5cIik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICAvLyBpZiBubyBsZWZ0IGNoaWxkcmVuIHJldHVybiByaWdodCBjaGlsZFxuICAgIH0gZWxzZSBpZiAoY3VycmVudE5vZGUubGVmdE5vZGUgPT09IG51bGwpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiMSBDaGlsZFwiKTtcbiAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucmlnaHROb2RlO1xuICAgIC8vIGlmIG5vIHJpZ2h0IGNoaWxkcmVuIHJldHVybiBsZWZ0IGNoaWxkXG4gICAgfSBlbHNlIGlmIChjdXJyZW50Tm9kZS5yaWdodE5vZGUgPT09IG51bGwpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiMSBDaGlsZFwiKTtcbiAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUubGVmdE5vZGU7IFxuXG4gICAgLy8gaWYgMiBjaGlsZHJlbiA+IGZpbmQgc3VjY2Vzc29yKG1pbiB2YWx1ZSBvbiByaWdodCBzaWRlIG5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIjIgQ2hpbGRyZW5cIik7XG4gICAgICAvLyBjb25zb2xlLmxvZyhjdXJyZW50Tm9kZS5yaWdodE5vZGUucm9vdCk7XG4gICAgICAvLyBnZXQgbWluIHZhbHVlIG5vZGUgb24gcmlnaHQgc2lkZSBvZiByZW1haW5pbmcgdHJlZVxuICAgICAgbGV0IHN1Y2Nlc3NvciA9IGdldE1pbihjdXJyZW50Tm9kZS5yaWdodE5vZGUpOyBcbiAgICAgIFxuICAgICAgLy8gcmVwbGFjZSByb290IHdpdGggc3VjY2Vzc29yIHJvb3RcbiAgICAgIGN1cnJlbnROb2RlLnJvb3QgPSBzdWNjZXNzb3Iucm9vdDtcblxuICAgICAgLy8gZGVsZXRlIHN1Y2Nlc3NvciBub2RlXG4gICAgICBzdWNjZXNzb3IgPSBkZWxldGVOb2RlKGN1cnJlbnROb2RlLnJpZ2h0Tm9kZSwgY3VycmVudE5vZGUucm9vdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnROb2RlO1xuICBcbiAgfSBlbHNlIGlmICh2YWx1ZSA8IGN1cnJlbnROb2RlLnJvb3Qpe1xuICAgIC8vIGlmIHZhbHVlIGlzIGxvd2VyIHRoYW4gY3VycmVudCByb290ID4gdHJhdmVyc2UgZG93biBsZWZ0IG9mIEJTVFxuICAgIGN1cnJlbnROb2RlLmxlZnROb2RlID0gZGVsZXRlTm9kZShjdXJyZW50Tm9kZS5sZWZ0Tm9kZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIC8vIGVsc2UgdHJhdmVyc2UgZG93biByaWdodCBvZiBCU1QgIFxuICAgIGN1cnJlbnROb2RlLnJpZ2h0Tm9kZSA9IGRlbGV0ZU5vZGUoY3VycmVudE5vZGUucmlnaHROb2RlLCB2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gdHJlZTtcblxufVxuXG5jb25zdCBmaW5kID0gKHRyZWUsIHZhbHVlKSA9PiB7XG4gIGxldCBjdXJyZW50Tm9kZSA9IHRyZWU7XG4gIC8vIGNvbnNvbGUubG9nKFwiVHJlZVwiKTtcbiAgLy8gY29uc29sZS5sb2coY3VycmVudE5vZGUpO1xuICBsZXQgZm91bmQgPSBudWxsO1xuICBpZiAoY3VycmVudE5vZGUucm9vdCA9PT0gdmFsdWUpIHtcbiAgICByZXR1cm4gY3VycmVudE5vZGU7XG4gIH1cbiAgaWYgKHZhbHVlIDwgY3VycmVudE5vZGUucm9vdCkge1xuICAgIGZvdW5kID0gZmluZChjdXJyZW50Tm9kZS5sZWZ0Tm9kZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGZvdW5kID0gZmluZChjdXJyZW50Tm9kZS5yaWdodE5vZGUsIHZhbHVlKTtcbiAgfVxuICBcblxuICByZXR1cm4gZm91bmQ7XG59XG5cblxuY29uc3QgbGV2ZWxPcmRlciA9ICh0cmVlLCBjYikgPT4ge1xuICBsZXQgZGlzY292ZXJlZE5vZGVzID0gW107XG4gIGlmICh0cmVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyByZWN1cnNpdmUgZnVuY3Rpb24gdG8gZ3JvdXAgbGV2ZWwgdmFsdWVzXG4gIGNvbnN0IGdyb3VwID0gKG5vZGUsIGxldmVsKSA9PiB7XG4gICAgLy8gQmFzZSBjb25kaXRpb24gaWYgbm9kZSAhPSBudWxsXG4gICAgaWYgKCFub2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRpc2NvdmVyZWROb2Rlc1tsZXZlbF0pIHtcbiAgICAgIC8vIGlmIGFycmF5IGFscmVhZHkgZXhpc3RzID4gcHVzaFxuICAgICAgZGlzY292ZXJlZE5vZGVzW2xldmVsXS5wdXNoKG5vZGUucm9vdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEVsc2Ugc2V0IGVsZW1lbnQgYXQgbGV2ZWwgaW5kZXggdG8gbmV3IGFycmF5IHdpdGggbm9kZSByb290IHZhbHVlXG4gICAgICBkaXNjb3ZlcmVkTm9kZXNbbGV2ZWxdID0gW25vZGUucm9vdF07XG4gICAgfVxuICAgIC8vIEdyb3VwIHZhbHVlcyByZWN1cnNpdmVseVxuICAgIGdyb3VwKG5vZGUubGVmdE5vZGUsIGxldmVsICsgMSk7XG4gICAgZ3JvdXAobm9kZS5yaWdodE5vZGUsIGxldmVsICsgMSk7XG4gIH1cblxuICBncm91cCh0cmVlLCAwKTtcblxuICAvLyBJdGVyYXRpdmUgV09SS0lORyFcbiAgLy8gbGV0IGN1cnJlbnROb2RlID0gdHJlZTtcbiAgLy8gbGV0IHF1ZSA9IHF1ZXVlKCk7XG4gIC8vIHF1ZS5lbnF1ZXVlKGN1cnJlbnROb2RlKTtcbiAgLy8gd2hpbGUoIXF1ZS5pc0VtcHR5KCkpIHtcbiAgLy8gICBsZXQgY3VycmVudCA9IHF1ZS5mcm9udCgpO1xuICAvLyAgIGNvbnNvbGUubG9nKGN1cnJlbnQpO1xuICAvLyAgIGlmIChjdXJyZW50LmxlZnROb2RlKSB7XG4gIC8vICAgICBxdWUuZW5xdWV1ZShjdXJyZW50LmxlZnROb2RlKTtcbiAgLy8gICB9XG4gIC8vICAgaWYgKGN1cnJlbnQucmlnaHROb2RlKSB7XG4gIC8vICAgICBxdWUuZW5xdWV1ZShjdXJyZW50LnJpZ2h0Tm9kZSk7XG4gIC8vICAgfVxuICAvLyAgIGRpc2NvdmVyZWROb2Rlcy5wdXNoKHF1ZS5kZXF1ZXVlKCkucm9vdCk7XG4gIC8vIH1cblxuICBpZiAoY2IpIHtcbiAgICBjYigpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkaXNjb3ZlcmVkTm9kZXM7XG4gIH1cblxufVxuXG5jb25zdCBwcmVPcmRlckJTVCA9ICh0cmVlLCBjYikgPT4ge1xuICBsZXQgZGlzY292ZXJlZE5vZGVzID0gW107XG4gIC8vIGNvbnNvbGUubG9nKHRyZWUpO1xuXG4gIGlmICh0cmVlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBjb25zb2xlLmxvZyh0cmVlKTtcblxuICAvL1JlY3Vyc2l2ZWx5IHRyYXZlcnNlIHRyZWUgYW5kIHB1c2ggZWFjaCBub2RlIHRvIGRpc2NvcnZlZCBhcnJheVxuICBjb25zdCBwcmVPcmRlciA9IChub2RlKSA9PiB7XG4gICAgaWYgKCFub2RlKXtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhub2RlLnJvb3QpO1xuICAgIGRpc2NvdmVyZWROb2Rlcy5wdXNoKG5vZGUucm9vdCk7XG4gICAgaWYgKGNiKSB7XG4gICAgICBjYihub2RlLnJvb3QpO1xuICAgIH1cbiAgICBwcmVPcmRlcihub2RlLmxlZnROb2RlKTtcbiAgICBwcmVPcmRlcihub2RlLnJpZ2h0Tm9kZSk7XG4gIH1cbiAgXG4gIHByZU9yZGVyKHRyZWUpO1xuXG4gIHJldHVybiBkaXNjb3ZlcmVkTm9kZXM7XG5cbn1cblxuY29uc3QgaW5PcmRlckJTVCA9ICh0cmVlLCBjYikgPT4ge1xuICBsZXQgZGlzY292ZXJlZE5vZGVzID0gW107XG5cbiAgaWYgKHRyZWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGluT3JkZXIgPSAobm9kZSkgPT4ge1xuICAgIGlmICghbm9kZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGluT3JkZXIobm9kZS5sZWZ0Tm9kZSk7XG4gICAgY29uc29sZS5sb2cobm9kZS5yb290KTtcbiAgICBkaXNjb3ZlcmVkTm9kZXMucHVzaChub2RlLnJvb3QpO1xuICAgIGlmIChjYikge1xuICAgICAgY2Iobm9kZS5yb290KTtcbiAgICB9XG4gICAgaW5PcmRlcihub2RlLnJpZ2h0Tm9kZSk7XG4gIH1cblxuICBpbk9yZGVyKHRyZWUpO1xuXG4gIC8vIFdobyB3b3VsZCBoYXZlIHRob3VnaHQuLi4gaW5PcmRlci4uLiBtZWFudCBJTk9SREVSIChyZXR1cm5zIGVsZW1lbnRzIGluIG9yZGVyKTtcbiAgcmV0dXJuIGRpc2NvdmVyZWROb2Rlcztcbn1cblxuY29uc3QgcG9zdE9yZGVyQlNUID0gKHRyZWUsIGNiKSA9PiB7XG4gIGxldCBkaXNjb3ZlcmVkTm9kZXMgPSBbXTtcblxuICBpZiAodHJlZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcG9zdE9yZGVyID0gKG5vZGUpID0+IHtcbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBwb3N0T3JkZXIobm9kZS5sZWZ0Tm9kZSk7XG4gICAgcG9zdE9yZGVyKG5vZGUucmlnaHROb2RlKVxuICAgIGNvbnNvbGUubG9nKG5vZGUucm9vdCk7XG4gICAgZGlzY292ZXJlZE5vZGVzLnB1c2gobm9kZS5yb290KTtcbiAgICBpZiAoY2IpIHtcbiAgICAgIGNiKG5vZGUucm9vdCk7XG4gICAgfVxuICB9XG5cbiAgcG9zdE9yZGVyKHRyZWUpO1xuICByZXR1cm4gZGlzY292ZXJlZE5vZGVzO1xufVxuXG5jb25zdCBpc0JhbGFuY2VkID0gKHRyZWUpID0+IHtcbiAgaWYgKCF0cmVlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuXG4gIGxldCBoZWlnaHRMZWZ0ID0gaGVpZ2h0QlNUKHRyZWUubGVmdE5vZGUpO1xuICBsZXQgaGVpZ2hSaWdodCA9IGhlaWdodEJTVCh0cmVlLnJpZ2h0Tm9kZSk7XG5cbiAgLy8gY29uc29sZS5sb2coaGVpZ2h0TGVmdCk7XG4gIC8vIGNvbnNvbGUubG9nKGhlaWdoUmlnaHQpO1xuXG4gIGxldCBoZWlnaHREaWZmID0gaGVpZ2h0TGVmdCAtIGhlaWdoUmlnaHQ7XG4gIC8vIGlmIG5lZ2F0aXZlICMgaW52ZXJzZVxuICBpZiAoaGVpZ2h0RGlmZiA8IDApIHtcbiAgICBoZWlnaHREaWZmICo9IC0xO1xuICB9XG4gIC8vIGNvbnNvbGUubG9nKGhlaWdodERpZmYpO1xuXG4gIGlmIChoZWlnaHREaWZmID4gMSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBpc0JhbGFuY2VkKHRyZWUubGVmdE5vZGUpO1xuICAgIGlzQmFsYW5jZWQodHJlZS5yaWdodE5vZGUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmNvbnN0IHJlYmFsYW5jZSA9ICh0cmVlKSA9PiB7XG4gIGlmICghdHJlZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGV0IG9yZGVyZWRBcnJheSA9IGluT3JkZXJCU1QodHJlZSk7XG5cbiAgcmV0dXJuIGJ1aWxkVHJlZShvcmRlcmVkQXJyYXkpO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zXG5jb25zdCBoZWlnaHRCU1QgPSAodHJlZSkgPT4ge1xuICBpZiAoIXRyZWUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyBpbml0aWFsaXplIGhlaWdodCBcbiAgbGV0IGhlaWdodCA9IDA7XG5cbiAgLy8gcmVjdXJzaXZlbHkgdHJhdmVyc2UgdHJlZVxuICBjb25zdCBnZXRIZWlnaHQgPSAobm9kZSwgaGVpZ2h0KSA9PiB7XG4gICAgLy8gYmFzZSBjb25kaXRpb25cbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfSBcbiAgICAvLyBhZGQgMSB0byBoZWlnaHRcbiAgICBoZWlnaHQrKztcbiAgICAvLyByZWN1cnNpdmVseSBjYWxsIGZ1bmN0aW9uIHBhc3NpbmcgaGVpZ2h0XG4gICAgbGV0IGhlaWdodExlZnQgPSBnZXRIZWlnaHQobm9kZS5sZWZ0Tm9kZSwgaGVpZ2h0KTtcbiAgICBsZXQgaGVpZ2h0UmlnaHQgPSBnZXRIZWlnaHQobm9kZS5yaWdodE5vZGUsIGhlaWdodCk7XG5cbiAgICAvLyByZXR1cm4gbGFyZ2VyIG9mIG51bWJlcnMgZnJvbSBsZWZ0L3JpZ2h0IHBvaW50ZXJzIG9mIG5vZGVcbiAgICBpZiAoaGVpZ2h0TGVmdCA+IGhlaWdodFJpZ2h0KSB7XG4gICAgICByZXR1cm4gaGVpZ2h0TGVmdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGhlaWdodFJpZ2h0O1xuICAgIH1cbiAgICBcbiAgfVxuXG4gIC8vIHJldHVybiB0aGUgaGVpZ2h0XG4gIHJldHVybiBnZXRIZWlnaHQodHJlZSwgaGVpZ2h0KTtcbn1cblxuY29uc3QgZGVwdGhCU1QgPSAodHJlZSwgdmFsdWUpID0+IHtcbiAgaWYgKCFub2RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLy8gaW5pdGlhbGl6ZSBoZWlnaHQgXG4gIGxldCBkZXB0aCA9IDA7XG5cbiAgLy8gcmVjdXJzaXZlbHkgdHJhdmVyc2UgdHJlZVxuICBjb25zdCBnZXREZXB0aD0gKG5vZGUsIGRlcHRoKSA9PiB7XG4gICAgLy8gYmFzZSBjb25kaXRpb25cbiAgICBpZiAoIW5vZGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gXG5cbiAgICAvLyBhZGQgMSB0byBkZXB0aFxuICAgIGRlcHRoKys7XG5cbiAgICBpZiAobm9kZS5yb290ID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGRlcHRoO1xuICAgIH1cblxuICAgIC8vIHJlY3Vyc2l2ZWx5IGNhbGwgZnVuY3Rpb24gcGFzc2luZyBkZXB0aFxuICAgIGxldCBkZXB0aExlZnQgPSBnZXREZXB0aChub2RlLmxlZnROb2RlLCBkZXB0aCk7XG4gICAgbGV0IGRlcHRoUmlnaHQgPSBnZXREZXB0aChub2RlLnJpZ2h0Tm9kZSwgZGVwdGgpO1xuXG5cbiAgICAvLyByZXR1cm4gbGFyZ2VyIG9mIG51bWJlcnMgZnJvbSBsZWZ0L3JpZ2h0IHBvaW50ZXJzIG9mIG5vZGVcbiAgICBpZiAoZGVwdGhMZWZ0KSB7XG4gICAgICByZXR1cm4gZGVwdGhMZWZ0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVwdGhSaWdodDtcbiAgICB9XG4gICAgXG4gIH1cblxuICAvLyByZXR1cm4gdGhlIGhlaWdodFxuICByZXR1cm4gZ2V0RGVwdGgodHJlZSwgZGVwdGgpO1xufVxuXG5jb25zdCBnZXRNaW4gPSAodHJlZSkgPT4ge1xuICBsZXQgY3VycmVudE5vZGUgPSB0cmVlO1xuICBpZiAoY3VycmVudE5vZGUubGVmdE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gY3VycmVudE5vZGU7XG4gIH0gZWxzZSB7XG4gICAgY3VycmVudE5vZGUgPSBnZXRNaW4oY3VycmVudE5vZGUubGVmdE5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIGN1cnJlbnROb2RlO1xufVxuXG5jb25zdCBxdWV1ZSA9ICgpID0+IHtcbiAgbGV0IHF1ZSA9IFtdO1xuXG4gIGNvbnN0IGVucXVldWUgPSAocXVlZE5vZGUpID0+IHtcbiAgICBxdWUucHVzaChxdWVkTm9kZSk7XG4gICAgcmV0dXJuIHF1ZTtcbiAgfVxuXG4gIGNvbnN0IGRlcXVldWUgPSAoKSA9PiB7XG4gICAgbGV0IGRlcXVlZE5vZGUgPSBxdWUuc2hpZnQoKTtcbiAgICByZXR1cm4gZGVxdWVkTm9kZTtcbiAgfVxuXG4gIGNvbnN0IGdldFF1ZSA9ICgpID0+IHtcbiAgICByZXR1cm4gcXVlO1xuICB9XG5cbiAgY29uc3QgaXNFbXB0eSA9ICgpID0+IHtcbiAgICBpZiAoZ2V0UXVlKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZyb250ID0gKCkgPT4ge1xuICAgIHJldHVybiBnZXRRdWUoKVswXTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZW5xdWV1ZSxcbiAgICBkZXF1ZXVlLFxuICAgIGdldFF1ZSxcbiAgICBpc0VtcHR5LFxuICAgIGZyb250LFxuICB9XG59XG5cbmNvbnN0IGFjZW5kaW5nID0gKGEsIGIpID0+IHtcbiAgcmV0dXJuIGEgLSBiO1xufVxuXG5jb25zdCBpbml0aWFsaXplU29ydGVkQXJyYXkgPSAoYXJyYXkpID0+IHtcbiAgICAvLyBzb3J0IGFycmF5XG4gICAgbGV0IHNvcnRlZEFycmF5ID0gYXJyYXkuc29ydChhY2VuZGluZyk7XG4gICAgLy8gY29udmVydCB0byBzZXQgdG8gcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICBsZXQgdG1wU2V0ID0gbmV3IFNldChzb3J0ZWRBcnJheSk7XG4gICAgLy8gQ29udmVydCBiYWNrIHRvIGFycmF5XG4gICAgc29ydGVkQXJyYXkgPSBBcnJheS5mcm9tKHRtcFNldCk7IFxuXG4gICAgcmV0dXJuIHNvcnRlZEFycmF5O1xufVxuXG5jb25zdCBwcmV0dHlQcmludCA9IChub2RlLCBwcmVmaXggPSAnJywgaXNMZWZ0ID0gdHJ1ZSkgPT4ge1xuICBpZiAobm9kZS5yaWdodE5vZGUgIT09IG51bGwpIHtcbiAgICBwcmV0dHlQcmludChub2RlLnJpZ2h0Tm9kZSwgYCR7cHJlZml4fSR7aXNMZWZ0ID8gJ+KUgiAgICcgOiAnICAgICd9YCwgZmFsc2UpO1xuICB9XG4gIGNvbnNvbGUubG9nKGAke3ByZWZpeH0ke2lzTGVmdCA/ICfilJTilIDilIAgJyA6ICfilIzilIDilIAgJ30ke25vZGUucm9vdH1gKTtcbiAgaWYgKG5vZGUubGVmdE5vZGUgIT09IG51bGwpIHtcbiAgICBwcmV0dHlQcmludChub2RlLmxlZnROb2RlLCBgJHtwcmVmaXh9JHtpc0xlZnQgPyAnICAgICcgOiAn4pSCICAgJ31gLCB0cnVlKTtcbiAgfVxufVxuXG4vLyBsZXQgdGVzdEFycmF5ID0gWzEsIDcsIDQsIDIzLCA4LCA5LCA0LCAzLCA1LCA3LCA5LCA2NywgNjM0NSwgMzI0XTtcbi8vIGNvbnNvbGUubG9nKHRlc3RUcmVlKTtcblxuLy8gbGV0IHRlc3RUcmVlID0gdHJlZSh0ZXN0QXJyYXkpO1xuLy8gY29uc29sZS5sb2codGVzdFRyZWUpO1xuLy8gcHJldHR5UHJpbnQodGVzdFRyZWUpO1xuXG4vLyBsZXQgaW5zZXJ0ZWRUcmVlID0gaW5zZXJ0Tm9kZSh0ZXN0VHJlZSwgNTIpO1xuLy8gaW5zZXJ0ZWRUcmVlID0gaW5zZXJ0Tm9kZShpbnNlcnRlZFRyZWUsIDQyNjkpO1xuLy8gaW5zZXJ0ZWRUcmVlID0gaW5zZXJ0Tm9kZShpbnNlcnRlZFRyZWUsIDQyODApO1xuLy8gaW5zZXJ0ZWRUcmVlID0gaW5zZXJ0Tm9kZShpbnNlcnRlZFRyZWUsIDUyNjkpO1xuLy8gaW5zZXJ0ZWRUcmVlID0gaW5zZXJ0Tm9kZShpbnNlcnRlZFRyZWUsIDYyNjkpO1xuXG5cbi8vIHByZXR0eVByaW50KGluc2VydGVkVHJlZSk7XG5cbi8vIGxldCBkZWxldGVkVHJlZSA9IGRlbGV0ZU5vZGUoaW5zZXJ0ZWRUcmVlLCA0MjgwKTtcblxuLy8gcHJldHR5UHJpbnQoZGVsZXRlZFRyZWUpO1xuXG4vLyBjb25zb2xlLmxvZyhmaW5kKGRlbGV0ZWRUcmVlLCAyMykpO1xuXG4vLyBjb25zb2xlLmxvZyhsZXZlbE9yZGVyKGRlbGV0ZWRUcmVlKSk7XG5cbi8vIGNvbnNvbGUubG9nKHByZU9yZGVyQlNUKGRlbGV0ZWRUcmVlKSk7XG4vLyBjb25zb2xlLmxvZyhpbk9yZGVyQlNUKGRlbGV0ZWRUcmVlKSk7XG4vLyBjb25zb2xlLmxvZyhwb3N0T3JkZXJCU1QoZGVsZXRlZFRyZWUpKTtcbi8vIGNvbnNvbGUubG9nKGhlaWdodEJTVChkZWxldGVkVHJlZS5yaWdodE5vZGUucmlnaHROb2RlKSk7XG4vLyBjb25zb2xlLmxvZyhkZXB0aEJTVChkZWxldGVkVHJlZSwgNjcpKTtcbi8vIGNvbnNvbGUubG9nKGlzQmFsYW5jZWQoZGVsZXRlZFRyZWUpKTtcbi8vIGxldCBiYWxhbmNlZFRyZWUgPSByZWJhbGFuY2UoZGVsZXRlZFRyZWUpO1xuXG4vLyBwcmV0dHlQcmludChiYWxhbmNlZFRyZWUpO1xuXG5jb25zdCBkcml2ZXJTY3JpcHQgPSAoKSA9PiB7XG4gIGxldCBhcnJheSA9IGNyZWF0ZVJhbmRvbUFycmF5KDEzKTtcblxuICBjb25zb2xlLmxvZyhhcnJheSk7XG5cbiAgbGV0IEJTVCA9IGJ1aWxkVHJlZShhcnJheSk7XG5cbiAgcHJldHR5UHJpbnQoQlNUKTtcblxuICBsZXQgYmFsYW5jZWQgPSBpc0JhbGFuY2VkKEJTVCk7XG5cbiAgY29uc29sZS5sb2coYmFsYW5jZWQpO1xuXG4gIGlmIChiYWxhbmNlZCkge1xuICAgIGNvbnNvbGUubG9nKGxldmVsT3JkZXIoQlNUKSk7XG4gICAgY29uc29sZS5sb2cocHJlT3JkZXJCU1QoQlNUKSk7XG4gICAgY29uc29sZS5sb2cocG9zdE9yZGVyQlNUKEJTVCkpO1xuICAgIGNvbnNvbGUubG9nKGluT3JkZXJCU1QoQlNUKSk7XG4gIH0gZWxzZSB7XG4gICAgcmViYWxhbmNlKEJTVCk7XG4gICAgY29uc29sZS5sb2cobGV2ZWxPcmRlcihCU1QpKTtcbiAgICBjb25zb2xlLmxvZyhwcmVPcmRlckJTVChCU1QpKTtcbiAgICBjb25zb2xlLmxvZyhwb3N0T3JkZXJCU1QoQlNUKSk7XG4gICAgY29uc29sZS5sb2coaW5PcmRlckJTVChCU1QpKTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgMTA7IGkrKykge1xuICAgIGluc2VydE5vZGUoQlNULCAoaSAqIDEyMykpO1xuICB9XG5cbiAgcHJldHR5UHJpbnQoQlNUKTtcblxuICBiYWxhbmNlZCA9IGlzQmFsYW5jZWQoQlNUKTtcblxuICBjb25zb2xlLmxvZyhiYWxhbmNlZCk7XG5cbiAgaWYgKCFiYWxhbmNlZCkge1xuICAgIEJTVCA9IHJlYmFsYW5jZShCU1QpO1xuICB9XG5cbiAgYmFsYW5jZWQgPSBpc0JhbGFuY2VkKEJTVCk7XG5cbiAgY29uc29sZS5sb2coYmFsYW5jZWQpO1xuICBwcmV0dHlQcmludChCU1QpO1xuXG4gIGNvbnNvbGUubG9nKGJhbGFuY2VkKTtcbiAgY29uc29sZS5sb2cobGV2ZWxPcmRlcihCU1QpKTtcbiAgY29uc29sZS5sb2cocHJlT3JkZXJCU1QoQlNUKSk7XG4gIGNvbnNvbGUubG9nKHBvc3RPcmRlckJTVChCU1QpKTtcbiAgY29uc29sZS5sb2coaW5PcmRlckJTVChCU1QpKTtcblxuXG5cbn1cblxuY29uc3QgY3JlYXRlUmFuZG9tQXJyYXkgPSAoYXJyYXlTaXplLCBtYXhOdW0pID0+IHtcbiAgbWF4TnVtID0gbWF4TnVtIHx8IDUwMDA7XG4gIGxldCByYW5kb21BcnJheSA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlTaXplOyBpKyspIHtcbiAgICBsZXQgcmFuZG9tTnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4TnVtKTtcbiAgICByYW5kb21BcnJheS5wdXNoKHJhbmRvbU51bSk7XG4gIH1cblxuICByZXR1cm4gcmFuZG9tQXJyYXk7XG59IFxuXG5kcml2ZXJTY3JpcHQoKTsiXSwibmFtZXMiOlsibm9kZSIsImRhdGEiLCJyb290IiwibGVmdE5vZGUiLCJyaWdodE5vZGUiLCJidWlsZFRyZWUiLCJhcnJheSIsImVuZCIsImxlbmd0aCIsIm1pZCIsIk1hdGgiLCJmbG9vciIsInRtcExlZnRBcnJheSIsInNsaWNlIiwidG1wUmlnaHRBcnJheSIsImluc2VydE5vZGUiLCJ0cmVlIiwidmFsdWUiLCJjdXJyZW50Tm9kZSIsImxldmVsT3JkZXIiLCJjYiIsImRpc2NvdmVyZWROb2RlcyIsImdyb3VwIiwibGV2ZWwiLCJwdXNoIiwicHJlT3JkZXJCU1QiLCJwcmVPcmRlciIsImNvbnNvbGUiLCJsb2ciLCJpbk9yZGVyQlNUIiwiaW5PcmRlciIsInBvc3RPcmRlckJTVCIsInBvc3RPcmRlciIsImlzQmFsYW5jZWQiLCJoZWlnaHREaWZmIiwiaGVpZ2h0QlNUIiwicmViYWxhbmNlIiwib3JkZXJlZEFycmF5IiwiZ2V0SGVpZ2h0IiwiaGVpZ2h0IiwiaGVpZ2h0TGVmdCIsImhlaWdodFJpZ2h0IiwicHJldHR5UHJpbnQiLCJwcmVmaXgiLCJpc0xlZnQiLCJhcnJheVNpemUiLCJtYXhOdW0iLCJyYW5kb21BcnJheSIsImkiLCJyYW5kb21OdW0iLCJyYW5kb20iLCJjcmVhdGVSYW5kb21BcnJheSIsIkJTVCIsImJhbGFuY2VkIiwiZHJpdmVyU2NyaXB0Il0sInNvdXJjZVJvb3QiOiIifQ==